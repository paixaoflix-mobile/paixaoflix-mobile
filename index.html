<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>PaixÃ£oFlix TV â€” v1.7.8</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet"/>

<style>
*{box-sizing:border-box}
body{margin:0;background:#000;color:#fff;font-family:Poppins;overflow:hidden}
::-webkit-scrollbar{display:none}
.app{display:flex;height:100vh}

/* MENU */
.left{width:230px;background:#0b0b0b;display:flex;flex-direction:column}
.logo img{width:160px;margin:10px auto;display:block}
.datetime{text-align:center;font-size:13px;opacity:.8}
.menu{padding:10px;overflow-y:auto}
.menu button{width:100%;margin-bottom:8px;padding:12px;background:#1c1c1c;border:none;border-radius:8px;color:#fff}
.menu button:focus{outline:3px solid #e50914}

/* CATEGORIAS */
.categories{width:220px;background:#111;padding:10px}
.cat-item{padding:8px}
.cat-item:focus{background:#1a1a1a;outline:3px solid #e50914}

/* MAIN */
.main{flex:1;overflow:hidden}
.grid{display:grid;gap:16px;padding:16px}
@media(max-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
@media(min-width:1025px){.grid{grid-template-columns:repeat(5,1fr)}}

.card{background:#111;border-radius:10px;overflow:hidden}
.card img{width:100%}
.card:focus{outline:4px solid #e50914}

/* PLAYER */
.player-box{position:fixed;inset:0;background:#000;display:none;z-index:20}
.player-box.active{display:block}
.exit-btn{position:fixed;top:15px;left:15px;z-index:30;background:#e50914;border:none;border-radius:8px;color:#fff;padding:10px;display:none}
.exit-btn.active{display:block}
</style>
</head>

<body>
<div class="app">

<aside class="left">
 <div class="logo">
  <img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/main/logoof512.png">
 </div>
 <div class="datetime" id="datetime"></div>
 <div class="menu" id="menu">
  <button data-menu="tv">ðŸ“¡ TV ao Vivo</button>
  <button data-menu="filmes">ðŸŽ¬ Filmes</button>
  <button data-menu="series">ðŸ“º SÃ©ries</button>
  <button data-menu="tvkids">ðŸ§’ TV Kids</button>
  <button data-menu="filmeskids">ðŸŽˆ Filmes Kids</button>
  <button data-menu="serieskids">ðŸ§¸ SÃ©ries Kids</button>
 </div>
</aside>

<aside class="categories" id="cats"></aside>
<main class="main" id="main"></main>

<button class="exit-btn" id="exitBtn">â¬… Voltar</button>
<div class="player-box" id="playerBox">
 <video id="player" class="video-js" controls></video>
</div>

</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script>
/* DATA */
setInterval(()=>{
 const d=new Date();
 document.getElementById("datetime").textContent =
 d.toLocaleDateString("pt-BR",{weekday:"long"})+" | "+
 d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
},1000);

/* VIDEO.JS SEM TECLADO */
const player = videojs("player",{userActions:{hotkeys:false}});
player.ready(()=>player.el().setAttribute("tabindex","-1"));

const box=document.getElementById("playerBox");
const exitBtn=document.getElementById("exitBtn");
exitBtn.onclick=()=>{player.pause();box.classList.remove("active");exitBtn.classList.remove("active")};

function play(url){
 box.classList.add("active");
 exitBtn.classList.add("active");
 player.src({src:url,type:url.includes("m3u8")?"application/x-mpegURL":"video/mp4"});
 player.play();
}

/* CONTEÃšDO REAL */
const urls={
 tv:"https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/canais.m3u",
 tvkids:"https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/canais_kids.m3u",
 filmes:"https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/filmes.json",
 series:"https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/series.json",
 filmeskids:"https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/kids_filmes.json",
 serieskids:"https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/kids_series.json"
};

const cats=document.getElementById("cats");
const main=document.getElementById("main");

/* MENU CLICK */
document.querySelectorAll(".menu button").forEach(btn=>{
 btn.onclick=()=>loadMenu(btn.dataset.menu);
});

async function loadMenu(type){
 cats.innerHTML=""; main.innerHTML="";
 if(type.includes("tv")){
  const txt=await fetch(urls[type]).then(r=>r.text());
  const linhas=txt.split("\n");
  const canais=[];
  for(let i=0;i<linhas.length;i++){
   if(linhas[i].startsWith("#EXTINF")){
    const nome=linhas[i].split(",")[1];
    const url=linhas[i+1];
    canais.push({nome,url});
   }
  }
  renderGrid(canais,true);
 }else{
  const data=await fetch(urls[type]).then(r=>r.json());
  data.sort((a,b)=>a.titulo.localeCompare(b.titulo));
  renderGrid(data,false);
 }
}

function renderGrid(lista,isTv){
 main.innerHTML="<div class='grid'></div>";
 const g=main.querySelector(".grid");
 lista.forEach(i=>{
  const c=document.createElement("div");
  c.className="card";c.tabIndex=0;
  c.innerHTML=`<img src="${i.poster||''}">`;
  c.onclick=()=>play(i.url);
  g.appendChild(c);
 });
}

/* NAVEGAÃ‡ÃƒO TV REAL */
document.addEventListener("keydown",e=>{
 const f=[...document.querySelectorAll("button,.cat-item,.card")].filter(el=>el.offsetParent);
 if(!f.length)return;
 if(!f.includes(document.activeElement)){f[0].focus();return;}
 let i=f.indexOf(document.activeElement);
 const cols=window.innerWidth<1024?3:5;
 if(e.key==="ArrowRight")i++;
 if(e.key==="ArrowLeft")i--;
 if(e.key==="ArrowDown")i+=cols;
 if(e.key==="ArrowUp")i-=cols;
 if(e.key==="Enter")document.activeElement.click();
 if(i<0)i=0;
 if(i>=f.length)i=f.length-1;
 f[i].focus();
});
</script>
</body>
</html>
