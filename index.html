<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Paix√£oFlix TV ‚Äî v1.7.10</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<!-- FOR√áAR PAISAGEM -->
<style>
@media (orientation: portrait) {
 body::before{
  content:"üîÑ Gire o dispositivo para modo paisagem";
  position:fixed;inset:0;
  background:#000;color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;z-index:9999;text-align:center
 }
}
</style>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
 margin:0;background:#000;color:#fff;
 font-family:'Poppins',sans-serif;
 overflow:hidden
}
::-webkit-scrollbar{display:none}

.app{display:flex;height:100vh}

/* MENU */
.left{
 width:230px;background:#0b0b0b;
 box-shadow:2px 0 6px rgba(0,0,0,.35);
 display:flex;flex-direction:column
}
.logo img{
 width:clamp(100px,12vh,200px);
 margin:10px auto;display:block
}
.datetime{text-align:center;font-size:13px;opacity:.8}

/* BUSCA */
.search{padding:10px}
.search input{
 width:100%;padding:10px;
 border-radius:8px;border:none;
 background:#1a1a1a;color:#fff
}

/* MENU BOT√ïES */
.menu{
 padding:10px;
 overflow-y:auto;
 flex:1
}
.menu button{
 width:100%;margin-bottom:8px;padding:12px;
 background:linear-gradient(180deg,#2a2a2a,#141414);
 border:none;border-radius:10px;color:#fff;
 cursor:pointer
}
.menu button:focus{
 outline:3px solid #e50914
}

/* CATEGORIAS */
.categories{
 background:#111;
 padding:8px;
 min-width:max-content;
 max-width:260px;
 overflow-y:auto
}
.cat-item{
 padding:8px 12px;
 cursor:pointer;
 white-space:nowrap
}
.cat-item:focus{
 outline:none;
 background:#1a1a1a;
 border-left:4px solid #e50914
}

/* MAIN */
.main{
 flex:1;
 overflow-y:auto;
 background:radial-gradient(circle,#111,#000)
}

/* GRID */
.grid{
 display:grid;
 gap:16px;
 padding:16px
}
@media (max-width:1024px){
 .grid{grid-template-columns:repeat(3,1fr)}
}
@media (min-width:1025px){
 .grid{grid-template-columns:repeat(5,1fr)}
}

.card{
 background:#111;border-radius:10px;
 overflow:hidden;cursor:pointer
}
.card:focus{
 outline:4px solid #e50914
}
.card img{width:100%;display:block}
.card .info{
 padding:8px;font-size:13px
}
.card .info span{font-size:12px;opacity:.7}

/* PLAYER */
.player-box{
 position:fixed;inset:0;
 background:#000;display:none;z-index:20
}
.player-box.active{display:block}
video{width:100%;height:100%;background:#000}

.exit-btn{
 position:fixed;top:15px;left:15px;
 z-index:30;background:#e50914;
 border:none;border-radius:8px;
 color:#fff;padding:10px 14px;
 display:none
}
.exit-btn.active{display:block}
</style>
</head>

<body>
<div class="app">

<aside class="left">
 <div class="logo">
  <img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/refs/heads/main/logoof512.png">
 </div>
 <div class="datetime" id="datetime"></div>

 <div class="search">
  <input id="search" placeholder="Qual sua escolha de hoje?">
 </div>

 <div class="menu">
  <button>üì° TV ao Vivo</button>
  <button>üé¨ Filmes</button>
  <button>üì∫ S√©ries</button>
  <button>üßí TV Kids</button>
  <button>üéà Filmes Kids</button>
  <button>üß∏ S√©ries Kids</button>
 </div>
</aside>

<aside class="categories" id="cats"></aside>
<main class="main" id="main"></main>

<button class="exit-btn" id="exitBtn">‚¨Ö Voltar</button>

<div class="player-box" id="playerBox">
 <video id="player" controls></video>
</div>

</div>

<script>
/* DATA */
setInterval(()=>{
 const d=new Date();
 document.getElementById("datetime").textContent=
 d.toLocaleDateString("pt-BR",{weekday:"long"})+
 " | "+
 d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
},1000);

/* BASE */
const main=document.getElementById("main");
const cats=document.getElementById("cats");
const video=document.getElementById("player");
const box=document.getElementById("playerBox");
const exitBtn=document.getElementById("exitBtn");

function limpar(){cats.innerHTML="";main.innerHTML=""}

/* PLAYER */
function play(url){
 box.classList.add("active");
 exitBtn.classList.add("active");
 video.src=url;
 video.play();
 video.focus();
}
exitBtn.onclick=()=>{
 video.pause();
 box.classList.remove("active");
 exitBtn.classList.remove("active");
};

/* üî• NAVEGA√á√ÉO CORRIGIDA (√öNICA ALTERA√á√ÉO REAL) */
document.addEventListener("keydown", e=>{
 const items=[...document.querySelectorAll("button,.cat-item,.card")];
 const current=document.activeElement;
 const index=items.indexOf(current);
 if(index===-1) return;

 const grid=current.closest(".grid");
 const cols=grid
  ? getComputedStyle(grid).gridTemplateColumns.split(" ").length
  : 1;

 switch(e.key){
  case "ArrowRight": items[index+1]?.focus(); break;
  case "ArrowLeft":  items[index-1]?.focus(); break;
  case "ArrowDown":  items[index+cols]?.focus(); break;
  case "ArrowUp":    items[index-cols]?.focus(); break;
  case "Enter":      current.click(); break;
  case "Backspace":
  case "Escape":     exitBtn.click(); break;
 }
});

/* FOCO INICIAL */
window.onload=()=>document.querySelector(".menu button")?.focus();

/* TV AO VIVO */
async function tv(m3u){
 limpar();
 const txt=await fetch(m3u).then(r=>r.text());
 const grupos={}; let cur={};
 txt.split("\n").forEach(l=>{
  if(l.startsWith("#EXTINF")){
   cur.nome=l.split(",")[1];
   cur.grupo=(l.match(/group-title="([^"]+)"/)||[])[1]||"Outros";
  }else if(l.startsWith("http")){
   if(!grupos[cur.grupo])grupos[cur.grupo]=[];
   grupos[cur.grupo].push({nome:cur.nome,url:l});
  }
 });
 Object.keys(grupos).sort().forEach(g=>{
  const c=document.createElement("div");
  c.className="cat-item";c.tabIndex=0;c.textContent=g;
  c.onclick=()=>listar(grupos[g],true);
  cats.appendChild(c);
 });
}

/* JSON */
async function json(file){
 limpar();
 const j=await fetch(file).then(r=>r.json());
 j.sort((a,b)=>a.titulo.localeCompare(b.titulo));
 const categorias=[...new Set(j.map(i=>i.genero))].sort();
 categorias.forEach(cat=>{
  const c=document.createElement("div");
  c.className="cat-item";c.tabIndex=0;c.textContent=cat;
  c.onclick=()=>listar(j.filter(i=>i.genero===cat));
  cats.appendChild(c);
 });
}

/* LISTAR */
function listar(lista,isTv){
 main.innerHTML="<div class='grid'></div>";
 const g=main.querySelector(".grid");
 lista.forEach(i=>{
  const c=document.createElement("div");
  c.className="card";c.tabIndex=0;
  c.innerHTML=`
   <img src="${i.poster||''}">
   <div class="info">
    <strong>${i.titulo||i.nome}</strong><br>
    <span>${i.year||""} ‚≠ê ${i.rating||""}</span>
   </div>`;
  c.onclick=()=>play(i.url);
  g.appendChild(c);
 });
}

/* BIND MENU */
const btn=document.querySelectorAll(".menu button");
btn[0].onclick=()=>tv("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/canais.m3u");
btn[1].onclick=()=>json("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/filmes.json");
btn[2].onclick=()=>json("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/series.json");
btn[3].onclick=()=>tv("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/kids_canais.m3u");
btn[4].onclick=()=>json("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/kids_filmes.json");
btn[5].onclick=()=>json("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/kids_series.json");
</script>
</body>
</html>
