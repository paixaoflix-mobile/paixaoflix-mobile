<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>PaixÃ£oFlix TV â€” v1.7.6</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet"/>

<style>
body{margin:0;background:#000;color:#fff;font-family:Poppins;overflow:hidden}
::-webkit-scrollbar{display:none}
.app{display:flex;height:100vh}

/* MENU */
.left{width:230px;background:#0b0b0b;display:flex;flex-direction:column}
.logo img{width:clamp(100px,12vh,200px);margin:10px auto;display:block}
.datetime{text-align:center;font-size:13px;opacity:.8}
.search{padding:10px}
.search input{width:100%;padding:10px;border-radius:8px;border:none;background:#1a1a1a;color:#fff}
.menu{padding:10px;overflow-y:auto;flex:1}
.menu button{width:100%;margin-bottom:8px;padding:12px;border-radius:10px;border:none;background:#222;color:#fff}
.menu button:focus{outline:3px solid #e50914}

/* CATEGORIES */
.categories{background:#111;padding:8px;max-width:260px;overflow-y:auto}
.cat-item{padding:8px 12px;white-space:nowrap}
.cat-item:focus{background:#1a1a1a;border-left:4px solid #e50914;outline:none}

/* MAIN */
.main{flex:1;background:#000}
.grid{display:grid;gap:16px;padding:16px}
@media(max-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
@media(min-width:1025px){.grid{grid-template-columns:repeat(5,1fr)}}

.card{background:#111;border-radius:10px;overflow:hidden}
.card img{width:100%}
.card:focus{outline:4px solid #e50914}
.info{padding:8px;font-size:13px}

/* PLAYER */
.player-box{position:fixed;inset:0;background:#000;display:none;z-index:20}
.player-box.active{display:block}
.exit-btn{position:fixed;top:15px;left:15px;z-index:30;background:#e50914;border:none;border-radius:8px;color:#fff;padding:10px;display:none}
.exit-btn.active{display:block}
</style>
</head>

<body>
<div class="app">

<aside class="left" id="menu">
 <div class="logo"><img src="https://raw.githubusercontent.com/VisorFinances/lista-paixaoflix/refs/heads/main/logoof512.png"></div>
 <div class="datetime" id="datetime"></div>
 <div class="search"><input placeholder="Qual sua escolha de hoje?"></div>
 <div class="menu">
  <button tabindex="0" onclick="tv()">ðŸ“¡ TV ao Vivo</button>
  <button tabindex="0" onclick="filmes()">ðŸŽ¬ Filmes</button>
  <button tabindex="0" onclick="series()">ðŸ“º SÃ©ries</button>
  <button tabindex="0" onclick="tvKids()">ðŸ§’ TV Kids</button>
  <button tabindex="0" onclick="filmesKids()">ðŸŽˆ Filmes Kids</button>
  <button tabindex="0" onclick="seriesKids()">ðŸ§¸ SÃ©ries Kids</button>
 </div>
</aside>

<aside class="categories" id="cats"></aside>
<main class="main" id="main"></main>

<button class="exit-btn" id="exitBtn" onclick="sair()">â¬… Voltar</button>
<div class="player-box" id="playerBox">
 <video id="player" class="video-js" controls></video>
</div>

</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script>
const player=videojs("player",{fluid:true});
const box=document.getElementById("playerBox");
const exitBtn=document.getElementById("exitBtn");
const cats=document.getElementById("cats");
const main=document.getElementById("main");

let context="menu";
let gridCols=window.innerWidth<1025?3:5;

/* DATA */
setInterval(()=>{
 const d=new Date();
 document.getElementById("datetime").textContent=
 d.toLocaleDateString("pt-BR",{weekday:"long"})+" | "+
 d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
},1000);

function limpar(){
 cats.innerHTML="";
 main.innerHTML="";
 context="menu";
}

/* PLAYER */
function play(url){
 box.classList.add("active");
 exitBtn.classList.add("active");
 player.src({src:url,type:url.includes("m3u8")?"application/x-mpegURL":"video/mp4"});
 player.play();
}
function sair(){
 player.pause();
 box.classList.remove("active");
 exitBtn.classList.remove("active");
}

/* NAVEGAÃ‡ÃƒO POR CONTEXTO */
document.addEventListener("keydown",e=>{
 let items;
 if(context==="menu") items=[...document.querySelectorAll(".menu button")];
 if(context==="cats") items=[...document.querySelectorAll(".cat-item")];
 if(context==="grid") items=[...document.querySelectorAll(".card")];

 const i=items.indexOf(document.activeElement);
 if(i<0) return;

 if(context!=="grid"){
  if(e.key==="ArrowDown") items[i+1]?.focus();
  if(e.key==="ArrowUp") items[i-1]?.focus();
 }else{
  if(e.key==="ArrowRight") items[i+1]?.focus();
  if(e.key==="ArrowLeft") items[i-1]?.focus();
  if(e.key==="ArrowDown") items[i+gridCols]?.focus();
  if(e.key==="ArrowUp") items[i-gridCols]?.focus();
 }

 if(e.key==="Enter") document.activeElement.click();
 if(["Escape","Backspace"].includes(e.key)) sair();
});

/* TV AO VIVO / KIDS */
async function carregarM3U(url){
 limpar();
 context="grid";
 const txt=await fetch(url).then(r=>r.text());
 const linhas=txt.split("\n");
 const grid=document.createElement("div");
 grid.className="grid";
 main.appendChild(grid);

 linhas.forEach((l,i)=>{
  if(l.startsWith("#EXTINF")){
   const nome=l.split(",")[1];
   const link=linhas[i+1];
   const c=document.createElement("div");
   c.className="card";
   c.tabIndex=0;
   c.innerHTML=`<div class="info"><strong>${nome.slice(0,12)}</strong></div>`;
   c.onclick=()=>play(link);
   grid.appendChild(c);
  }
 });
 grid.querySelector(".card")?.focus();
}

function tv(){carregarM3U("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/canais.m3u")}
function tvKids(){carregarM3U("https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/kids_canais.m3u")}

/* FILMES / SERIES */
const categorias=["AÃ§Ã£o","Anime","AnimaÃ§Ã£o","Aventura","ClÃ¡ssicos","ComÃ©dia","Crime","DocumentÃ¡rios","Dorama","Drama","Faroeste","FicÃ§Ã£o","Musical","Nacional","Policial","Religioso","Romance","Suspense","Terror","Adulto"];

async function carregarJSON(file){
 limpar();
 context="cats";
 const data=await fetch(`https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/${file}`).then(r=>r.json());

 categorias.forEach(cat=>{
  const c=document.createElement("div");
  c.className="cat-item";
  c.tabIndex=0;
  c.textContent=cat;
  c.onclick=()=>{
   const lista=data.filter(i=>i.genero===cat)
    .sort((a,b)=>a.titulo.localeCompare(b.titulo));
   listar(lista);
  };
  cats.appendChild(c);
 });

 cats.querySelector(".cat-item")?.focus();
}

function filmes(){carregarJSON("filmes.json")}
function series(){carregarJSON("series.json")}
function filmesKids(){listarKids("kids_filmes.json")}
function seriesKids(){listarKids("kids_se_
