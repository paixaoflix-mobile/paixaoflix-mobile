<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Paix√£oFlix TV ‚Äî v11.0 Arena Dashboard</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet"/>
    
    <style>
        :root { --primary: #e50914; --sports: #00ff41; --bg-dark: #0b0e11; --bg-side: #000000; --text: #ffffff; }
        * { box-sizing: border-box; outline: none; font-family: 'Poppins', sans-serif !important; }
        body { margin: 0; background: var(--bg-dark); color: var(--text); overflow: hidden; width: 100vw; height: 100vh; }
        ::-webkit-scrollbar { display: none; }

        .app-container { display: flex; height: 100vh; width: 100vw; }
        
        /* SIDEBAR ESTILIZADA */
        .sidebar { width: 240px; background: var(--bg-side); display: flex; flex-direction: column; padding: 15px; border-right: 1px solid #222; }
        .logo img { width: 130px; display: block; margin: 0 auto 10px; }
        .date-display { font-size: 11px; text-align: center; color: #888; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        
        .nav-menu { flex: 1; overflow-y: auto; }
        .nav-menu button { width: 100%; padding: 12px; margin-bottom: 6px; border: none; border-radius: 8px; background: #1a1a1a; color: #fff; cursor: pointer; text-align: left; font-size: 12px; font-weight: 600; }
        .nav-menu button:focus { background: var(--primary); outline: 2px solid #fff; }
        .btn-arena { border: 1px solid var(--sports) !important; color: var(--sports) !important; background: rgba(0,255,65,0.05) !important; }

        /* √ÅREA DE CONTE√öDO */
        .content-area { flex: 1; overflow-y: auto; background: var(--bg-dark); padding: 20px; }
        
        /* DASHBOARD DE JOGOS (ESTILO IMAGEM) */
        #arena-dashboard { display: none; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 1px solid #222; padding-bottom: 10px; }
        .league-selector { display: flex; gap: 15px; margin-bottom: 20px; }
        .league-card { background: #1a1a1a; padding: 10px 20px; border-radius: 8px; display: flex; align-items: center; gap: 10px; font-size: 12px; border: 2px solid transparent; cursor: pointer; }
        .league-card:focus { border-color: var(--sports); }

        .game-grid { display: grid; grid-template-columns: 1fr 350px; gap: 20px; }
        .score-card { background: #161b22; border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #30363d; cursor: pointer; }
        .score-card:focus { background: #21262d; border-color: var(--sports); transform: scale(1.02); }
        .team-info { display: flex; align-items: center; gap: 12px; width: 40%; }
        .team-info img { width: 35px; height: 35px; object-fit: contain; }
        .score-box { font-size: 22px; font-weight: 800; letter-spacing: 4px; color: #fff; width: 20%; text-align: center; }
        .live-status { color: var(--sports); font-size: 10px; font-weight: bold; animation: blink 1.5s infinite; }

        /* MINI PLAYER LATERAL */
        .mini-player-box { background: #000; border-radius: 12px; overflow: hidden; border: 1px solid #333; position: sticky; top: 0; }
        .mini-player-box video { width: 100%; aspect-ratio: 16/9; }

        /* GRID PADR√ÉO PARA FILMES/S√âRIES */
        .grid { display: grid; gap: 15px; grid-template-columns: repeat(5, 1fr); }
        .card { background: #111; border-radius: 8px; overflow: hidden; border: 3px solid transparent; cursor: pointer; transition: 0.2s; position: relative; }
        .card img { width: 100%; aspect-ratio: 2/3; object-fit: cover; display: block; }
        .card:focus { border-color: var(--primary); transform: scale(1.05); z-index: 10; }

        /* TELA DE DETALHES */
        #details-screen { position: fixed; inset: 0; background: #000; z-index: 5000; display: none; padding: 40px; overflow-y: auto; }
        .episodes-grid { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
        .episode-btn { background: #222; padding: 10px 20px; border-radius: 5px; cursor: pointer; border: 2px solid transparent; }
        .episode-btn:focus { border-color: var(--primary); background: var(--primary); }

        #player-overlay { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; }
        @keyframes blink { 0% {opacity:1} 50% {opacity:0.3} 100% {opacity:1} }
    </style>
</head>
<body>

<div class="app-container">
    <aside class="sidebar">
        <div class="logo"><img src="https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/refs/heads/main/logoof512.png"></div>
        <div id="date-now" class="date-display"></div>
        
        <nav class="nav-menu">
            <button class="btn-arena" onclick="showArena()">‚öΩ ARENA JOGOS</button>
            <button onclick="smartLoad('canais.m3u')">üì° TV AO VIVO</button>
            <button onclick="toggleDrop('drop-filmes')">üé¨ FILMES ‚ñæ</button>
            <div id="drop-filmes" class="dropdown-container"></div>
            <button onclick="toggleDrop('drop-series')">üì∫ S√âRIES ‚ñæ</button>
            <div id="drop-series" class="dropdown-container"></div>
            <button onclick="smartLoad('kids_filmes.json')">üéà FILMES KIDS</button>
            <button onclick="loadContinue()">üïí CONTINUAR</button>
        </nav>
    </aside>

    <main class="content-area">
        <div id="arena-dashboard">
            <div class="dashboard-header">
                <h2 style="margin:0;">WEB TV DOM√âSTICA - JOGOS AO VIVO</h2>
                <div id="clock-large"></div>
            </div>
            
            <div class="league-selector">
                <div class="league-card" tabindex="0" onclick="fetchScores(13)">üáßüá∑ Brasileir√£o A</div>
                <div class="league-card" tabindex="0" onclick="fetchScores(39)">üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø Premier League</div>
                <div class="league-card" tabindex="0" onclick="fetchScores(2)">üèÜ Champions League</div>
            </div>

            <div class="game-grid">
                <div id="live-list">
                    <div style="text-align:center; padding:50px; color:#555;">Selecione uma liga para ver placares reais...</div>
                </div>
                
                <div class="mini-player-box">
                    <video id="mini-video" class="video-js vjs-default-skin" controls muted></video>
                    <div style="padding:15px;">
                        <span class="live-status">‚óè AO VIVO</span>
                        <h4 id="mini-title" style="margin:5px 0;">Selecione um jogo</h4>
                        <button class="episode-btn" style="width:100%;" onclick="expandPlayer()">TELA CHEIA</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="main-grid" class="grid"></div>
    </main>
</div>

<div id="details-screen">
    <button class="episode-btn" onclick="closeDetails()">‚¨Ö VOLTAR</button>
    <div id="details-content" style="margin-top:40px;"></div>
</div>

<div id="player-overlay">
    <button class="episode-btn" style="position:absolute; top:20px; left:20px; z-index:10;" onclick="closePlayer()">‚¨Ö SAIR</button>
    <video id="main-player" class="video-js vjs-big-play-centered" playsinline></video>
</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script>
    const API_KEY = "b4e09054a088c25504269d2761496bae";
    const API_BASE = "https://raw.githubusercontent.com/paixaoflix-mobile/paixaoflix-mobile/main/data/";
    
    let player = videojs('main-player', { controls: true });
    let miniPlayer = videojs('mini-video', { controls: true });

    window.onload = () => {
        updateClock();
        setInterval(updateClock, 1000);
        setupDropdowns();
        showArena(); // Inicia na Arena conforme solicitado
    };

    function updateClock() {
        const n = new Date();
        const str = n.toLocaleDateString('pt-BR', {weekday:'long', day:'numeric', month:'short', year:'numeric'}) + " " + n.toLocaleTimeString();
        document.getElementById('date-now').textContent = str;
        if(document.getElementById('clock-large')) document.getElementById('clock-large').textContent = str;
    }

    // MOSTRAR ARENA (Dashboard da Imagem)
    function showArena() {
        document.getElementById('main-grid').style.display = 'none';
        document.getElementById('arena-dashboard').style.display = 'block';
    }

    async function fetchScores(leagueId) {
        const list = document.getElementById('live-list');
        list.innerHTML = '<div style="text-align:center; padding:20px;">Consultando API...</div>';
        
        try {
            const r = await fetch(`https://v3.football.api-sports.io/fixtures?league=${leagueId}&season=2025&live=all`, {
                headers: { "x-rapidapi-key": API_KEY, "x-rapidapi-host": "v3.football.api-sports.io" }
            });
            const data = await r.json();
            renderScores(data.response);
        } catch(e) {
            list.innerHTML = '<div style="color:red;">Erro ao conectar na API. Verifique sua chave.</div>';
        }
    }

    function renderScores(games) {
        const list = document.getElementById('live-list');
        if(!games.length) {
            list.innerHTML = '<div style="text-align:center; padding:20px;">Nenhum jogo AO VIVO nesta liga no momento.</div>';
            return;
        }
        list.innerHTML = games.map(g => `
            <div class="score-card" tabindex="0" onclick="playGame('${g.teams.home.name} x ${g.teams.away.name}')">
                <div class="team-info">
                    <img src="${g.teams.home.logo}">
                    <span>${g.teams.home.name}</span>
                </div>
                <div class="score-box">${g.goals.home} - ${g.goals.away}</div>
                <div class="team-info" style="justify-content: flex-end;">
                    <span>${g.teams.away.name}</span>
                    <img src="${g.teams.away.logo}">
                </div>
                <div class="live-status">${g.fixture.status.elapsed}'</div>
            </div>
        `).join('');
    }

    function playGame(title) {
        document.getElementById('mini-title').textContent = title;
        // Aqui usaremos o link do seu M3U para o canal correspondente
        // Por enquanto, simulando carregamento
        miniPlayer.src({ src: 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8', type: 'application/x-mpegURL' });
        miniPlayer.play();
    }

    function expandPlayer() {
        const currentSrc = miniPlayer.currentSrc();
        if(!currentSrc) return;
        miniPlayer.pause();
        openPlayer(currentSrc, document.getElementById('mini-title').textContent);
    }

    // FUN√á√ïES DE FILMES/S√âRIES (Mantidas conforme v10)
    async function smartLoad(file) {
        document.getElementById('arena-dashboard').style.display = 'none';
        document.getElementById('main-grid').style.display = 'grid';
        const r = await fetch(API_BASE + file);
        const data = await r.json();
        renderGrid(data);
    }

    function renderGrid(data) {
        const grid = document.getElementById('main-grid');
        grid.innerHTML = data.map(item => `
            <div class="card" tabindex="0" onclick="openDetails(${JSON.stringify(item).replace(/"/g, '&quot;')})">
                <img src="${item.poster || item.image}">
                <div style="padding:5px; font-size:10px; text-align:center;">${item.titulo}</div>
            </div>
        `).join('');
    }

    function openDetails(item) {
        const screen = document.getElementById('details-screen');
        screen.style.display = 'block';
        const isSerie = item.identificador_archive || item.tipo === 'serie';
        
        let action = isSerie ? 
            `<div class="episodes-grid">${Array.from({length: item.episodios || 10}, (_, i) => 
                `<button class="episode-btn" onclick="openPlayer('https://archive.org/download/${item.identificador_archive}/ep${i+1}.mp4', '${item.titulo} - EP${i+1}')">EP ${i+1}</button>`
            ).join('')}</div>` : 
            `<button class="episode-btn" style="margin-top:20px; width:200px;" onclick="openPlayer('${item.url}', '${item.titulo}')">ASSISTIR AGORA</button>`;

        document.getElementById('details-content').innerHTML = `
            <div style="display:flex; gap:30px;">
                <img src="${item.poster || item.image}" style="width:200px; border-radius:10px;">
                <div>
                    <h1 style="color:var(--primary);">${item.titulo}</h1>
                    <p style="color:#ccc; max-width:600px;">${item.sinopse || 'Sinopse n√£o dispon√≠vel.'}</p>
                    ${action}
                </div>
            </div>
        `;
    }

    function openPlayer(url, title) {
        const ov = document.getElementById('player-overlay');
        ov.style.display = 'block';
        player.src({ src: url, type: url.includes('m3u8') ? 'application/x-mpegURL' : 'video/mp4' });
        player.play();
    }

    function closePlayer() { player.pause(); document.getElementById('player-overlay').style.display = 'none'; }
    function closeDetails() { document.getElementById('details-screen').style.display = 'none'; }
    function setupRemote() { document.addEventListener('keydown', (e) => { if(e.keyCode === 13) document.activeElement.click(); }); }
    function setupDropdowns() { /* ... similar √† v10 ... */ }
    function toggleDrop(id) { document.getElementById(id).classList.toggle('active'); }
</script>
</body>
</html>
